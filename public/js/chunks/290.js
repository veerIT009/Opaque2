"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[290],{95290:function(e,t,r){r.r(t),r.d(t,{default:function(){return V}});var o=r(67294),n=r(14416),i=r(45697),u=r.n(i),c=r(97975),a=r(72446),s=r.n(a),l=r(82923),b={insert:"head",singleton:!1},f=(s()(l.Z,b),l.Z.locals,r(775)),d=r(55124),m=r(54769),y=r(42446),p=r(66724),h=r(92715),v=r(48521);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==g(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){var t=e.bookHistory,r=e.onOpenModal,o=e.onChangeFilter,n=e.totalRecordMember,i=e.isLoading,u=[{sortable:!0,wrap:!0,selector:function(e){return e.book_item.book?e.book_item.book.library_id:"N/A"},name:"LIBRARY",cell:function(e){return e.book_item.book?h.find((function(t){return e.book_item.book.library_id===t.id})).name:"N/A"}},{sortable:!0,wrap:!0,selector:function(e){return e.book_item.book?e.book_item.book.name:"N/A"},name:(0,d.PB)("books.select.book.label"),cell:function(e){return e.book_item.book?e.book_item.book.name:"N/A"}},{sortable:!0,selector:function(e){return function(e){return e.book_item.book_code?e.book_item.book_code:"N/A"}},width:"150px",name:(0,d.PB)("book-history.table.book-code.column"),cell:function(e){return e.book_item.book_code}},{sortable:!0,selector:function(e){return e.issued_on?e.issued_on:"N/A"},name:(0,d.PB)("book-history.table.issue-date.column"),width:"160px",cell:function(e){return(0,v.jsx)("span",{children:e.issued_on?l(e.issued_on):"N/A"})}},{sortable:!0,selector:function(e){return e.issue_due_date?e.issue_due_date:"N/A"},name:(0,d.PB)("book-history.table.issue-due-date.column"),width:"180px",cell:function(e){return(0,v.jsx)("span",{children:e.issue_due_date?l(e.issue_due_date):"N/A"})}},{sortable:!0,selector:function(e){return e.reserved_on?e.reserved_on:"N/A"},name:(0,d.PB)("book-history.table.reserve-date.column"),width:"180px",cell:function(e){return(0,v.jsx)("span",{children:e.reserve_date?l(e.reserve_date):"N/A"})}},{sortable:!0,selector:function(e){return e.return_due_date?e.return_due_date:"N/A"},name:(0,d.PB)("book-history.table.return-due-date.column"),width:"180px",cell:function(e){return(0,v.jsx)("span",{children:e.return_due_date?l(e.return_due_date):"N/A"})}},{sortable:!0,selector:function(e){return e.return_date?e.return_date:"N/A"},name:(0,d.PB)("book-history.table.return-date.column"),width:"150px",cell:function(e){return(0,v.jsx)("span",{children:e.return_date?l(e.return_date):"N/A"})}},{sortable:!0,selector:function(e){return e.status?e.status:"N/A"},name:(0,d.PB)("react-data-table.status.column"),width:"100px",cell:function(e){return a(e)}},{name:(0,d.PB)("react-data-table.action.column"),selector:function(e){return e.id?e.id:"N/A"},ignoreRowClick:!0,allowOverflow:!0,button:!0,center:!0,width:"90px",cell:function(e){return s(e)}}],a=function(e){var t={status:e.status,item:e};return(0,v.jsx)(m.Z,j(j({},t),{},{item:e}))},s=function(e){return e.status===f.OI.BOOK_RESERVED?(0,v.jsx)(c.Z,{className:"frontend-btn",size:"sm",color:"danger text-white",onClick:function(t){t.stopPropagation(),r(e)},children:(0,d.PB)("book-history.input.unreserve-btn.label")}):""},l=function(e){return(0,v.jsx)("span",{children:e?(0,d.vh)(e):""})};return(0,v.jsx)(y.Z,{items:t,columns:u,emptyStateMessageId:"books-history.empty-state.title",emptyNotFoundStateMessageId:"books-history.not-found.empty-state.title",loading:i,className:"table-bordered table-striped mt-2",totalRows:n,onChange:o,icon:p.qv.BOOK_CIRCULATION})};w.propTypes={bookHistory:u().array,totalRecordMember:u().number,isLoading:u().bool,onOpenModal:u().func,onChangeFilter:u().func};var _=w,P=r(18742),x=r(84936),S=r(69474);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==A(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){var t=e.bookHistory,r=e.unReserveBook,n=e.toggleModal,i=t?t.book_item.book.name:"",u=t?t.book_item.book_code:"",c=(0,v.jsxs)(v.Fragment,{children:[" ",(0,d.PV)("book-history.modal.message"),' "',"".concat(i," (").concat(u,")"),'"']}),a=(0,d.PV)("book-history.modal.title"),s=(0,o.useCallback)((function(){r(t.book_item.id,t.book_item.book.library_id)}),[t]);return(0,v.jsx)(P.Z,B(B({},e),{},{actions:(0,v.jsx)(x.Z,{onConfirm:s,onCancel:n}),content:c,title:a}))};R.propTypes={bookHistory:u().object,unReserveBook:u().func,toggleModal:u().func};var M=(0,n.$j)(null,{unReserveBook:S._})(R),I=(r(10646),r(74819),r(69608));function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==D(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===D(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,i,u,c=[],a=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(o=i.call(r)).done)&&(c.push(o.value),c.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{if(!a&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(s)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var F=function(e){var t=T((0,o.useState)(null),2),r=t[0],n=t[1],i=e.bookHistory,u=e.fetchBooksHistory,c=e.isLoading,a=e.toggleModal,s=e.totalRecordMember,l=T((0,o.useState)(!0),2),b=l[0],f=l[1],m={bookHistory:r,toggleModal:a};(0,o.useEffect)((function(){setTimeout((function(){return f(!1)}),1500)}),[]);var y={bookHistory:i,onOpenModal:function(){n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),a()},onChangeFilter:function(e){u(e)},totalRecordMember:s,isLoading:c};return(0,v.jsxs)("section",{className:"member_books_history",children:[b?(0,v.jsx)("div",{className:"spinner",children:(0,v.jsx)("img",{src:"/public/images/301.gif"})}):(0,v.jsx)("div",{className:"container",children:(0,v.jsxs)("div",{className:"animated fadeIn",children:[(0,v.jsxs)("div",{className:"section-title-center text-center",children:[(0,v.jsx)("h2",{className:"display-6",children:(0,d.PV)("book-history.title")}),(0,v.jsx)("div",{className:"section-divider divider-traingle"})]}),(0,v.jsx)("div",{className:"common-container",children:(0,v.jsx)(_,H({},y))})]})}),(0,v.jsx)(M,H({},m))]})};F.propTypes={history:u().object,bookHistory:u().array,totalRecordMember:u().number,isLoading:u().bool,fetchBooksHistory:u().func,toggleModal:u().func};var V=(0,n.$j)((function(e){return{bookHistory:e.bookHistory,isLoading:e.isLoading,totalRecordMember:e.totalRecordMember}}),{fetchBooksHistory:S.z,toggleModal:I.$})(F)},82923:function(e,t,r){var o=r(27897),n=r.n(o),i=r(1519),u=r.n(i)()(n());u.push([e.id,".book-name{max-width:650px}.book-action{width:90px}.book-return-date{width:100px}","",{version:3,sources:["webpack://./resources/pos/src/member/components/book-history/BookHistory.scss"],names:[],mappings:"AACI,WACI,eAAR,CAGI,aACI,UADR,CAII,kBACI,WAFR",sourcesContent:[".book {\r\n    &-name {\r\n        max-width: 650px;\r\n    }\r\n\r\n    &-action {\r\n        width: 90px;\r\n    }\r\n\r\n    &-return-date {\r\n        width: 100px;\r\n    }\r\n}\r\n"],sourceRoot:""}]),t.Z=u}}]);
//# sourceMappingURL=290.js.map